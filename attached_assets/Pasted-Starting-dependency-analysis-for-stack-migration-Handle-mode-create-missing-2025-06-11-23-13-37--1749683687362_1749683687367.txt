Starting dependency analysis for stack migration. Handle mode: create_missing 
2025-06-11 23:13:37,733 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Raw compose data networks section: {'traefik-net': {'external': True}} 
2025-06-11 23:13:37,733 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Detected external networks: ['traefik-net'] 
2025-06-11 23:13:37,733 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Found external networks: ['traefik-net'] 
2025-06-11 23:13:37,735 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Creating missing network: traefik-net 
2025-06-11 23:13:38,372 29172 WARNING j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Failed to create network traefik-net: {"message":"page not found"}
 
2025-06-11 23:13:38,372 29172 WARNING j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Could not create network traefik-net: Failed to create required network 'traefik-net': {"message":"page not found"}
 
2025-06-11 23:13:38,372 29172 ERROR j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Error creating missing networks: Failed to create required network 'traefik-net': Failed to create required network 'traefik-net': {"message":"page not found"}
 
2025-06-11 23:13:38,372 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Dependency analysis completed successfully 
2025-06-11 23:13:38,372 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Detected traefik-net reference, ensuring it exists 
2025-06-11 23:13:38,374 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Creating missing network: traefik-net 
2025-06-11 23:13:39,019 29172 WARNING j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Failed to create network traefik-net: {"message":"page not found"}
 
2025-06-11 23:13:39,019 29172 WARNING j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Could not create network traefik-net: Failed to create required network 'traefik-net': {"message":"page not found"}
 
2025-06-11 23:13:39,019 29172 ERROR j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Error creating missing networks: Failed to create required network 'traefik-net': Failed to create required network 'traefik-net': {"message":"page not found"}
 
2025-06-11 23:13:39,019 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Starting container conflict resolution. Handle mode: rename 
2025-06-11 23:13:39,668 29172 INFO j-port odoo.addons.j_portainer.wizards.stack_migration_wizard: Container conflict resolution completed 
2025-06-11 23:13:39,669 29172 INFO j-port odoo.addons.j_portainer.models.portainer_stack: Creating stack traefik_copy in Portainer using environment ID 4 
2025-06-11 23:13:39,669 29172 INFO j-port odoo.addons.j_portainer.models.portainer_stack: Creating stack 'traefik_copy' using endpoint: /api/stacks/create/standalone/string?endpointId=4 
2025-06-11 23:13:39,669 29172 INFO j-port odoo.addons.j_portainer.models.portainer_stack: Stack payload: {'Name': 'traefik_copy', 'StackFileContent': 'version: "3.8"\n\nservices:\n  traefik:\n    image: traefik:v3.0\n    container_name: traefik\n    restart: unless-stopped\n    networks:\n      - traefik-net\n    command:\n      - "--providers.docker=true"\n      - "--providers.docker.network=traefik-net"\n      - "--providers.docker.exposedbydefault=false"\n      - "--api.dashboard=true"\n      - "--entrypoints.web.address=:80"\n      - "--entrypoints.websecure.address=:443"\n      - "--log.level=DEBUG"\n      - "--accesslog=true"\n      # Let\'s Encrypt DNS challenge via Route53\n      - "--certificatesresolvers.letsencrypt.acme.email=info@jaah.it"\n      - "--certificatesresolvers.letsencrypt.acme.storage=/letsencrypt/acme.json"\n      - "--certificatesresolvers.letsencrypt.acme.dnschallenge=true"\n      - "--certificatesresolvers.letsencrypt.acme.dnschallenge.provider=route53"\n      # EntryPoints\n      - "--entrypoints.web.address=:80"\n      - "--entrypoints.web.http.redirections.entrypoint.to=websecure"\n      - "--entrypoints.web.http.redirections.entrypoint.scheme=https"\n      - "--entrypoints.websecure.address=:443"\n      - "--entrypoints.websecure.http.tls.certresolver=letsencrypt"\n      - "--entrypoints.websecure.http.tls.domains[0].main=10.jaah.it"\n      - "--entrypoints.websecure.http.tls.domains[0].sans=*.10.jaah.it"\n    labels:\n      - "traefik.enable=true"\n      # Redirect http(s)://www.* to non-www https://\n      - "traefik.http.routers.http-catchall.rule=HostRegexp(`{host:(www\\\\.)?.+}`)"\n      - "traefik.http.routers.http-catchall.entrypoints=web"\n      - "traefik.http.routers.http-catchall.middlewares=redirect-to-root"\n      - "traefik.http.routers.wwwsecure-catchall.rule=HostRegexp(`{host:(www\\\\.).+}`)"\n      - "traefik.http.routers.wwwsecure-catchall.entrypoints=websecure"\n      - "traefik.http.routers.wwwsecure-catchall.tls=true"\n      - "traefik.http.routers.wwwsecure-catchall.middlewares=redirect-to-root"\n      # Middleware to strip www and force HTTPS\n      - "traefik.http.middlewares.redirect-to-root.redirectregex.regex=^https?://(?:www\\\\.)?(.+)"\n      - "traefik.http.middlewares.redirect-to-root.redirectregex.replacement=https://$${1}"\n      - "traefik.http.middlewares.redirect-to-root.redirectregex.permanent=true"\n    ports:\n      - "80:80"\n      - "443:443"\n    volumes:\n      - "/var/run/docker.sock:/var/run/docker.sock:ro"\n      - "/data/compose/88/letsencrypt:/letsencrypt"\n      - "/root/.aws:/root/.aws:ro"\n    environment:\n      - AWS_REGION=us-east-1\n      - AWS_SHARED_CREDENTIALS_FILE=/root/.aws/credentials\n\nnetworks:\n  traefik-net:\n    external: true'} 
2025-06-11 23:13:40,423 29172 INFO j-port odoo.addons.j_portainer.models.portainer_stack: Stack creation response: Status 500, Content: {"message":"failed to deploy a stack: compose up operation failed: network traefik-net declared as external, but could not be found","details":"Failed to deploy a stack: compose up operation failed: network traefik-net declared as external, but could not be found"} 
2025-06-11 23:13:40,424 29172 ERROR j-port odoo.addons.j_portainer.models.portainer_stack: Failed to create stack 'traefik_copy': Status 500, Response: {"message":"failed to deploy a stack: compose up operation failed: network traefik-net declared as external, but could not be found","details":"Failed to deploy a stack: compose up operation failed: network traefik-net declared as external, but could not be found"} 
2025-06-11 23:13:40,427 29172 WARNING j-port odoo.http: Stack migration failed: Failed to create stack in Portainer: Failed to create stack 'traefik_copy': failed to deploy a stack: compose up operation failed: network traefik-net declared as external, but could not be found
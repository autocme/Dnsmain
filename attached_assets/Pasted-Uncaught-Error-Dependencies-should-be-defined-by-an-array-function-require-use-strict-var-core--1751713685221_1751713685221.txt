Uncaught Error: Dependencies should be defined by an array: function(require){'use strict';var core=require('web.core');var ajax=require('web.ajax');var publicWidget=require('web.public.widget');var _t=core._t;var SaaSPricingSnippet=publicWidget.Widget.extend({selector:'.saas-pricing-section',events:{'change .toggle-input':'_onBillingToggle','click .btn-main':'_onBuyNowClick','click .btn-trial':'_onFreeTrialClick','click .saas-pricing-card':'_onCardClick',},init:function(){this._super.apply(this,arguments);this.packages=[];this.currentBilling='monthly';this.freeTrialDays=30;},start:function(){this._super.apply(this,arguments);this._applyDynamicStyling();var self=this;setTimeout(function(){self._loadPackages();},100);return Promise.resolve();},_loadPackages:function(){var self=this;console.log('Loading packages...');if(!ajax||!ajax.jsonRpc){console.warn('ajax.jsonRpc not available, trying with fetch');return self._loadPackagesWithFetch();}
return ajax.jsonRpc('/saas/packages/data','call',{}).then(function(result){console.log('Packages loaded successfully:',result);if(result&&result.success){self.packages=result.packages||[];self.freeTrialDays=result.free_trial_days||30;self._renderPackages();}else{if(result&&Array.isArray(result)){self.packages=result;self.freeTrialDays=30;self._renderPackages();}else{console.error('Invalid response format:',result);self._showError('Failed to load packages. Please check the server response.');}}}).catch(function(error){console.error('Error loading packages:',error);console.log('Trying fallback method...');self._loadPackagesWithFetch();});},_loadPackagesWithFetch:function(){var self=this;fetch('/saas/packages/data',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({jsonrpc:'2.0',method:'call',params:{},id:new Date().getTime()})}).then(function(response){if(!response.ok){throw new Error('HTTP error! status: '+response.status);}
return response.json();}).then(function(data){console.log('Fetch response:',data);var result=data.result;if(result&&result.success){self.packages=result.packages||[];self.freeTrialDays=result.free_trial_days||30;self._renderPackages();}else{console.error('Invalid response format:',result);self._showError('Failed to load packages. Please check the server response.');}}).catch(function(error){console.error('Fetch error:',error);self._showError('Failed to load packages. Please try again.');});},_renderPackages:function(){var self=this;var $container=this.$('#pricingCards');$container.empty();if(this.packages.length===0){$container.html('<div class="col-12 text-center"><p>No packages available at the moment.</p></div>');return;}
this.packages.forEach(function(pkg,index){var $card=self._createPackageCard(pkg,index);$container.append($card);});this._updatePricingDisplay();},_createPackageCard:function(pkg,index){var isFeatured=index===1;var cardClass='col-lg-4 col-md-6 mb-4';var $card=$('<div>').addClass(cardClass);var $cardInner=$('<div>').addClass('saas-pricing-card h-100');if(isFeatured){$cardInner.addClass('featured');}
$cardInner.attr('data-package-id',pkg.id);var $header=$('<div>').addClass('card-header');$header.append($('<h3>').addClass('package-name').text(pkg.name));var $priceDisplay=$('<div>').addClass('price-display');$priceDisplay.append($('<span>').addClass('currency-symbol').text(pkg.currency_symbol));$priceDisplay.append($('<span>').addClass('price-amount').attr('data-monthly',pkg.monthly_price).attr('data-yearly',pkg.yearly_price));$priceDisplay.append($('<span>').addClass('price-period'));$header.append($priceDisplay);$cardInner.append($header);var $body=$('<div>').addClass('card-body');if(pkg.description){$body.append($('<div>').addClass('package-description').text(pkg.description));}
var $featuresList=$('<ul>').addClass('features-list');pkg.features.forEach(function(feature){$featuresList.append($('<li>').text(feature));});$body.append($featuresList);$cardInner.append($body);var $footer=$('<div>').addClass('card-footer');var $mainBtn=$('<button>').addClass('btn btn-primary btn-main').attr('data-action','buy');$mainBtn.append($('<span>').addClass('btn-text').text('Buy Now'));$mainBtn.append($('<i>').addClass('fa fa-arrow-right btn-icon'));$footer.append($mainBtn);if(pkg.has_free_trial){var $trialBtn=$('<button>').addClass('btn btn-outline-secondary btn-trial').attr('data-action','trial');$trialBtn.append($('<span>').addClass('btn-text').text('Free Trial'));$trialBtn.append($('<i>').addClass('fa fa-gift btn-icon'));$footer.append($trialBtn);}
$cardInner.append($footer);$card.append($cardInner);return $card;},_updatePricingDisplay:function(){var self=this;var isYearly=this.currentBilling==='yearly';this.$('.saas-pricing-card').each(function(){var $card=$(this);var $priceAmount=$card.find('.price-amount');var $pricePeriod=$card.find('.price-period');var monthlyPrice=parseFloat($priceAmount.attr('data-monthly'))||0;var yearlyPrice=parseFloat($priceAmount.attr('data-yearly'))||0;if(isYearly){$priceAmount.text(Math.round(yearlyPrice));$pricePeriod.text('/ year');}else{$priceAmount.text(Math.round(monthlyPrice));$pricePeriod.text('/ month');}});this.$('.toggle-label').removeClass('active');this.$('.toggle-label[data-period="'+this.currentBilling+'"]').addClass('active');},_onBillingToggle:function(ev){var isChecked=$(ev.currentTarget).prop('checked');this.currentBilling=isChecked?'monthly':'yearly';this._updatePricingDisplay();},_onBuyNowClick:function(ev){ev.preventDefault();var $card=$(ev.currentTarget).closest('.saas-pricing-card');var packageId=parseInt($card.attr('data-package-id'));this._selectPackage(packageId,false);},_onFreeTrialClick:function(ev){ev.preventDefault();var $card=$(ev.currentTarget).closest('.saas-pricing-card');var packageId=parseInt($card.attr('data-package-id'));this._selectPackage(packageId,true);},_onCardClick:function(ev){this.$('.saas-pricing-card').removeClass('active');$(ev.currentTarget).addClass('active');},_selectPackage:function(packageId,freeTrial){var self=this;var pkg=this.packages.find(function(p){return p.id===packageId;});if(!pkg){this._showError('Package not found');return;}
this._showLoading();ajax.jsonRpc('/saas/package/select','call',{package_id:packageId,billing_period:this.currentBilling,free_trial:freeTrial}).then(function(result){self._hideLoading();if(result.success){self._showSuccess(result.message);}else{self._showError(result.message||'Failed to select package');}}).catch(function(error){self._hideLoading();console.error('Error selecting package:',error);self._showError('Failed to select package. Please try again.');});},_applyDynamicStyling:function(){var $section=this.$el;var primaryColor=$section.attr('data-primary-color')||'#875A7B';var accentColor=$section.attr('data-accent-color')||'#0066CC';var cardBg=$section.attr('data-card-bg')||'#FFFFFF';var textColor=$section.attr('data-text-color')||'#333333';var borderRadius=$section.attr('data-border-radius')||'8';var shadowIntensity=$section.attr('data-shadow-intensity')||'0.1';$section.css({'--primary-color':primaryColor,'--accent-color':accentColor,'--card-bg':cardBg,'--text-color':textColor,'--border-radius':borderRadius+'px','--shadow-intensity':shadowIntensity});},_showError:function(message){var $container=this.$('#pricingCards');$container.html('<div class="col-12 text-center"><div class="alert alert-danger">'+message+'</div></div>');},_showSuccess:function(message){var $alert=$('<div class="alert alert-success alert-dismissible fade show" role="alert">').html(message+'<button type="button" class="btn-close" data-bs-dismiss="alert"></button>');this.$('.container').prepend($alert);setTimeout(function(){$alert.alert('close');},5000);},_showLoading:function(){this.$('.btn').prop('disabled',true).append(' <i class="fa fa-spinner fa-spin"></i>');},_hideLoading:function(){this.$('.btn').prop('disabled',false).find('.fa-spinner').remove();},});publicWidget.registry.saaSPricingSnippet=SaaSPricingSnippet;return SaaSPricingSnippet;}
    at ModuleLoader.define (web.assets_frontend_minimal.min.js:11:36)
    at web.assets_frontend_lazy.min.js:7677:6